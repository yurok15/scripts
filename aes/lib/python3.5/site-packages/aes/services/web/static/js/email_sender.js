app.controller("EmailSenderCtrl", ['$scope', '$http',
    function ($scope, $http) {
        $scope.use = '';
        $scope.use_loading = false;
        $scope.mail_loading = false;
        $scope.email_from = 'test_sender@intermedia.net';
        $scope.email_to = 'test_recipient@intermedia.net';
        $scope.email_body = 'Test message';
        $scope.add_eicar = false;
        $scope.response_text = '';
        $scope.response_success = false;
        $scope.submit=function(){
            $scope.mail_loading = true;
            $scope.response_success = false;
            $scope.response_text = '';
            $http.post("/web_app",
                $scope.email_body,
                {"params":
                    {
                        "app": "email_sender",
                        "method": "web_send",
                        "email_from": $scope.email_from,
                        "email_to": $scope.email_to,
                        "add_eicar": $scope.add_eicar
                    }
                }
            ).then(function successCallback(response) {
                $scope.mail_loading = false;
                $scope.response_success = response.data.success;
                $scope.response_text = response.data.response;
            });
        }
    }
]);